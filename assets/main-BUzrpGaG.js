import{o as h,d as v,a as E,g as B,b as y,l as P}from"./auth-cbFyKSDW.js";document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("navLoginContainer"),d=document.getElementById("navProfileContainer"),I=document.getElementById("profileDropdownBtn"),s=document.getElementById("navProfileImg"),c=document.getElementById("navProfileIcon"),n=document.getElementById("profileDropdownMenu"),r=document.getElementById("closeDropdownBtn"),o=document.getElementById("menuProfileImg"),l=document.getElementById("menuProfileIcon"),m=document.getElementById("menuUserName"),L=document.getElementById("menuUserEmail"),u=document.getElementById("menuSignOutBtn");h(y,async e=>{if(e){a.classList.add("hidden"),d.classList.remove("hidden"),L.innerText=e.email,m.innerText=e.displayName||"Student";try{const i=v(E,"users",e.uid),f=await B(i);if(f.exists()){const t=f.data().settings||{};t.userFirstName&&(m.innerText=t.userFirstName),t.userProfileImage?(s.src=t.userProfileImage,s.classList.remove("hidden"),c.classList.add("hidden"),o.src=t.userProfileImage,o.classList.remove("hidden"),l.classList.add("hidden")):g()}}catch(i){console.error("Profile load error:",i),g()}}else a.classList.remove("hidden"),d.classList.add("hidden"),n.classList.add("hidden")}),I.addEventListener("click",e=>{e.stopPropagation(),n.classList.remove("hidden")}),r&&r.addEventListener("click",e=>{e.stopPropagation(),n.classList.add("hidden")}),document.addEventListener("click",e=>{d.contains(e.target)||n.classList.add("hidden")}),u&&u.addEventListener("click",async()=>{await P(),n.classList.add("hidden")});function g(){s.classList.add("hidden"),c.classList.remove("hidden"),o.classList.add("hidden"),l.classList.remove("hidden")}});
