import{o as ge,b as he}from"./auth-cbFyKSDW.js";import{setCurrentUser as fe,loadUserData as pe,userData as R,saveUserData as le}from"./store-B1XsjTCK.js";let b,H,X,_,J=!1,z="pen",$="#000000",q=3,k=[],M=[],S=[],F=[],C=-1;const A=1440*60*1e3;document.addEventListener("DOMContentLoaded",()=>{ge(he,e=>{e?(fe(e),pe(()=>{ye(e)})):window.location.href="/pages/login/"}),Ie()});function ye(e){ke(e),ve(),Ee(),Be(),$="#000000",["colorPicker","colorPickerMobile"].forEach(o=>{const t=document.getElementById(o);t&&(t.value=$)}),["colorPreview","colorPreviewMobile"].forEach(o=>{const t=document.getElementById(o);t&&(t.style.backgroundColor=$)}),window.addEventListener("resize",()=>{const o=b.toDataURL();Q(),de(o)})}function ve(){document.getElementById("canvasContainer"),b=document.getElementById("whiteboardCanvas"),H=b.getContext("2d",{willReadFrequently:!0}),X=document.getElementById("tempCanvas"),_=X.getContext("2d"),Q(),L(),b.addEventListener("mousedown",xe),window.addEventListener("mousemove",te),window.addEventListener("mouseup",oe),b.addEventListener("touchstart",e=>{e.target===b&&e.preventDefault();const o=e.touches[0],t=new MouseEvent("mousedown",{clientX:o.clientX,clientY:o.clientY});b.dispatchEvent(t)},{passive:!1}),window.addEventListener("touchmove",e=>{if(!J)return;const o=e.touches[0],t=new MouseEvent("mousemove",{clientX:o.clientX,clientY:o.clientY});te(t)},{passive:!1}),window.addEventListener("touchend",e=>{new MouseEvent("mouseup",{}),oe()})}function Q(){const e=document.getElementById("canvasContainer");b.width=e.clientWidth,b.height=e.clientHeight,X.width=e.clientWidth,X.height=e.clientHeight,[H,_].forEach(o=>{o.lineCap="round",o.lineJoin="round"})}function L(){C<F.length-1&&(F=F.slice(0,C+1)),F.push({dataUrl:b.toDataURL(),notes:JSON.parse(JSON.stringify(M)),images:JSON.parse(JSON.stringify(S))}),C++,V()}function we(){C>0&&(C--,ae(F[C]),V(),B())}function be(){C<F.length-1&&(C++,ae(F[C]),V(),B())}function ae(e){if(!e)return;const o=new Image;o.onload=()=>{H.clearRect(0,0,b.width,b.height),H.drawImage(o,0,0)},o.src=e.dataUrl;const t=document.getElementById("notesContainer");t.innerHTML="",M=JSON.parse(JSON.stringify(e.notes||[])),M.forEach(i=>ee(i)),S=JSON.parse(JSON.stringify(e.images||[])),S.forEach(i=>Z(i))}function V(){[{undo:"toolUndo",redo:"toolRedo"},{undo:"toolUndoMobile",redo:"toolRedoMobile"}].forEach(o=>{const t=document.getElementById(o.undo),i=document.getElementById(o.redo);t&&(t.disabled=C<=0,t.style.opacity=t.disabled?"0.3":"1"),i&&(i.disabled=C>=F.length-1,i.style.opacity=i.disabled?"0.3":"1")})}function xe(e){if(e.target!==b)return;J=!0;const[o,t]=ce(e);k=[[o,t]],document.getElementById("whiteboardPlaceholder").style.opacity="0",re()}function te(e){if(!J)return;const[o,t]=ce(e);k.push([o,t]),re()}function re(){let e=z==="eraser"?H:_;if(z!=="eraser"&&_.clearRect(0,0,X.width,X.height),k.length<2)return;e.beginPath(),e.moveTo(k[0][0],k[0][1]);for(let t=1;t<k.length-1;t++){const i=k[t],l=k[t+1],a=[(i[0]+l[0])/2,(i[1]+l[1])/2];e.quadraticCurveTo(i[0],i[1],a[0],a[1])}const o=k[k.length-1];e.lineTo(o[0],o[1]),z==="eraser"?(e.globalCompositeOperation="destination-out",e.strokeStyle="rgba(0,0,0,1)",e.lineWidth=q*5):(e.globalCompositeOperation="source-over",e.strokeStyle=$,z==="highlighter"?(e.globalAlpha=.4,e.lineWidth=q*3):(e.globalAlpha=1,e.lineWidth=q)),e.lineCap="round",e.lineJoin="round",e.stroke(),e.globalCompositeOperation="source-over",e.globalAlpha=1}function oe(){J&&(J=!1,k.length>0&&(z!=="eraser"&&(H.drawImage(X,0,0),_.clearRect(0,0,X.width,X.height)),L()),k=[],B())}function ce(e){const o=b.getBoundingClientRect();return[e.clientX-o.left,e.clientY-o.top]}function Ee(){const e=c=>document.getElementById(c),o=(c,d,h,P)=>{const N=e(c),w=e(d);N&&N.addEventListener(h,P),w&&w.addEventListener(h,P)},t=["Pen","Highlighter","Eraser"];function i(c){z=c.toLowerCase(),t.forEach(d=>{const h=d.toLowerCase()===z,P=e(`tool${d}`),N=e(`tool${d}Mobile`);[P,N].forEach(w=>{w&&(w.classList.remove("active","bg-primary/10","text-primary","text-gray-600","dark:text-gray-300"),h?w.classList.add("active","bg-primary/10","text-primary"):w.classList.add("text-gray-600","dark:text-gray-300"))})})}o("toolPen","toolPenMobile","click",()=>i("Pen")),o("toolHighlighter","toolHighlighterMobile","click",()=>i("Highlighter")),o("toolEraser","toolEraserMobile","click",()=>i("Eraser")),o("toolUndo","toolUndoMobile","click",we),o("toolRedo","toolRedoMobile","click",be),o("addStickyBtn","addStickyBtnMobile","click",()=>{const c={id:Date.now(),x:100+M.length*20,y:150+M.length*20,text:"",color:"#FEF3C7"};M.push(c),ee(c),B(),L()});const a=e("imageUploadInput"),r=()=>a.click();a&&a.addEventListener("change",Le),o("addImageBtn","addImageBtnMobile","click",r),o("colorPicker","colorPickerMobile","input",c=>{$=c.target.value,["colorPreview","colorPreviewMobile"].forEach(d=>{const h=e(d);h&&(h.style.backgroundColor=$)}),z==="eraser"&&i("Pen")}),["colorPreview","colorPreviewMobile"].forEach(c=>{const d=e(c);d&&(d.style.backgroundColor=$)}),o("lineWidth","lineWidthMobile","input",c=>{q=c.target.value;const d=c.target.id==="lineWidth"?"lineWidthMobile":"lineWidth",h=e(d);h&&(h.value=q)});const u=e("clearModal");o("clearBoardBtn","clearBoardBtnMobile","click",()=>{u.classList.remove("hidden"),u.classList.add("flex")}),e("cancelClearBtn").addEventListener("click",()=>{u.classList.add("hidden"),u.classList.remove("flex")}),e("confirmClearBtn").addEventListener("click",()=>{H.clearRect(0,0,b.width,b.height),document.getElementById("notesContainer").innerHTML="",M=[],S=[],F=[],C=-1,L(),localStorage.removeItem("studentDash_whiteboard"),B(!0),document.getElementById("whiteboardPlaceholder").style.opacity="0.5",u.classList.add("hidden"),u.classList.remove("flex")});const n=e("mobileExportModal"),f=e("mobileExportSheet"),p=e("mobileExportBackdrop"),s=c=>{n&&(c?(n.classList.remove("hidden"),n.classList.add("flex"),setTimeout(()=>{p.classList.remove("opacity-0"),f.classList.remove("translate-y-full")},10)):(p.classList.add("opacity-0"),f.classList.add("translate-y-full"),setTimeout(()=>{n.classList.add("hidden"),n.classList.remove("flex")},300)))};e("mobileExportCancelBtn")&&e("mobileExportCancelBtn").addEventListener("click",()=>s(!1)),p&&p.addEventListener("click",()=>s(!1)),e("mobileExportImageBtn")&&e("mobileExportImageBtn").addEventListener("click",()=>{ne(),s(!1)}),e("mobileExportPdfBtn")&&e("mobileExportPdfBtn").addEventListener("click",()=>{ie(),s(!1)});const E=c=>d=>{if(d.stopPropagation(),c)s(!0);else{const h=e("exportDropdown");h&&(h.classList.toggle("hidden"),h.classList.toggle("flex"))}};e("exportDropdownBtn")&&e("exportDropdownBtn").addEventListener("click",E(!1)),e("exportDropdownBtnMobile")&&e("exportDropdownBtnMobile").addEventListener("click",E(!0)),document.addEventListener("click",c=>{const d=e("exportDropdown"),h=e("exportDropdownBtn");d&&!d.classList.contains("hidden")&&!d.contains(c.target)&&(!h||!h.contains(c.target))&&(d.classList.add("hidden"),d.classList.remove("flex"))}),e("downloadImageBtn")&&e("downloadImageBtn").addEventListener("click",ne),e("downloadPdfBtn")&&e("downloadPdfBtn").addEventListener("click",ie);const I=e("mobileMenuBtn"),D=e("whiteboardToolbarMobile");I&&D&&I.addEventListener("click",()=>{D.classList.contains("hidden")?(D.classList.remove("hidden"),D.classList.add("flex"),I.querySelector("span").innerText="close",I.classList.add("bg-gray-800","text-white"),I.classList.remove("bg-primary")):(D.classList.add("hidden"),D.classList.remove("flex"),I.querySelector("span").innerText="edit",I.classList.remove("bg-gray-800","text-white"),I.classList.add("bg-primary"))}),o("toggleFullscreenBtn","toggleFullscreenBtnMobile","click",()=>{const c=document.querySelector("header");if(!c)return;const d=c.classList.toggle("hidden"),h=d?"close_fullscreen":"fullscreen",P=d?"Exit Fullscreen":"Enter Fullscreen";["toggleFullscreenBtn","toggleFullscreenBtnMobile"].forEach(N=>{const w=e(N);if(w){const j=w.querySelector("span");j&&(j.innerText=h),w.title=P,d?(w.classList.add("bg-primary/10","text-primary"),w.classList.remove("text-gray-600","dark:text-gray-300")):(w.classList.remove("bg-primary/10","text-primary"),w.classList.add("text-gray-600","dark:text-gray-300"))}}),setTimeout(Q,50)});const g=e("whiteboardToolbarDesktop"),O=e("minimizeToolbarBtn");if(g){O&&O.addEventListener("click",v=>{v.stopPropagation();const Y=g.querySelectorAll("div"),W=O.querySelector("span");let T=!1;Y.forEach(U=>{T=U.classList.toggle("hidden")}),T?(W.innerText="open_in_full",O.classList.remove("border-r","mr-1"),g.classList.add("px-1")):(W.innerText="remove",O.classList.add("border-r","mr-1"),g.classList.remove("px-1"))});let c=!1,d=0,h=0;const P=10,N=v=>{if(v.target.tagName==="BUTTON"||v.target.tagName==="INPUT"||v.target.closest("button"))return;c=!0;const Y=v.touches?v.touches[0].clientX:v.clientX,W=v.touches?v.touches[0].clientY:v.clientY,T=g.getBoundingClientRect(),U=g.offsetParent.getBoundingClientRect();d=Y-T.left,h=W-T.top,g.style.transform="none",g.style.left=`${T.left-U.left}px`,g.style.top=`${T.top-U.top}px`,g.style.cursor="grabbing"},w=v=>{if(!c)return;v.preventDefault();const Y=v.touches?v.touches[0].clientX:v.clientX,W=v.touches?v.touches[0].clientY:v.clientY,T=g.offsetParent.getBoundingClientRect();let U=Y-d-T.left,K=W-h-T.top;const ue=g.offsetParent.clientWidth-g.offsetWidth-P,me=g.offsetParent.clientHeight-g.offsetHeight-P;U=Math.max(P,Math.min(U,ue)),K=Math.max(P,Math.min(K,me)),g.style.left=`${U}px`,g.style.top=`${K}px`},j=()=>{c=!1,g.style.cursor="move"};g.addEventListener("mousedown",N),document.addEventListener("mousemove",w),document.addEventListener("mouseup",j)}}function Le(e){const o=e.target.files[0];if(!o)return;const t=new FileReader;t.onload=i=>{const l={id:Date.now(),x:100+S.length*20,y:150+S.length*20,src:i.target.result,width:200,height:"auto"},a=new Image;a.onload=()=>{const r=a.height/a.width;l.height=200*r,S.push(l),Z(l),B(),L()},a.src=i.target.result},t.readAsDataURL(o),e.target.value=""}function Z(e){const o=document.getElementById("notesContainer"),t=document.createElement("div");t.className="absolute pointer-events-auto shadow-2xl rounded-xl flex flex-col group animate-pop-in border-2 border-transparent hover:border-primary/50 transition-colors",t.style.left=`${e.x}px`,t.style.top=`${e.y}px`,t.style.width=`${e.width}px`,t.dataset.id=e.id,t.innerHTML=`
        <div class="absolute -top-3 -right-3 w-7 h-7 bg-white rounded-full shadow-md flex items-center justify-center cursor-pointer hover:bg-red-50 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity z-20 delete-img" title="Delete">
            <span class="material-symbols-outlined text-sm">close</span>
        </div>
        <img src="${e.src}" class="w-full h-auto rounded-lg pointer-events-none select-none" draggable="false">
        
        <!-- Resize Handle -->
        <div class="resize-handle absolute bottom-0 right-0 w-6 h-6 bg-white/80 backdrop-blur-sm rounded-tl-lg rounded-br-lg cursor-nwse-resize z-20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity hover:bg-primary hover:text-white shadow-sm">
            <span class="material-symbols-outlined text-xs">open_in_full</span>
        </div>
    `;const i=t.querySelector(".resize-handle");let l=!1,a=0,r=0;const m=s=>{s.stopPropagation(),l=!0,r=s.clientX||s.touches[0].clientX,a=t.offsetWidth,t.style.zIndex=100};i.addEventListener("mousedown",m),i.addEventListener("touchstart",m);const x=s=>{if(!l)return;const I=(s.clientX||(s.touches?s.touches[0].clientX:0))-r;let D=Math.max(100,a+I);t.style.width=`${D}px`,e.width=D},u=()=>{l&&(l=!1,t.style.zIndex=20,B(),L())};window.addEventListener("mousemove",x),window.addEventListener("touchmove",x),window.addEventListener("mouseup",u),window.addEventListener("touchend",u);let y=!1,n=[0,0];t.addEventListener("mousedown",s=>{if(s.target.closest(".delete-img")||s.target.closest(".resize-handle"))return;y=!0;const E=t.getBoundingClientRect();n=[s.clientX-E.left,s.clientY-E.top],t.style.zIndex=100,t.classList.add("scale-[1.01]","ring-2","ring-primary")}),t.addEventListener("touchstart",s=>{if(s.target.closest(".delete-img")||s.target.closest(".resize-handle"))return;y=!0;const E=t.getBoundingClientRect();n=[s.touches[0].clientX-E.left,s.touches[0].clientY-E.top],t.style.zIndex=100,t.classList.add("scale-[1.01]","ring-2","ring-primary")});const f=s=>{if(!y)return;const E=o.getBoundingClientRect(),I=s.clientX||(s.touches?s.touches[0].clientX:0),D=s.clientY||(s.touches?s.touches[0].clientY:0);let G=I-E.left-n[0],g=D-E.top-n[1];t.style.left=`${G}px`,t.style.top=`${g}px`,e.x=G,e.y=g},p=()=>{y&&(y=!1,t.style.zIndex=20,t.classList.remove("scale-[1.01]","ring-2","ring-primary"),B(),L())};window.addEventListener("mousemove",f),window.addEventListener("touchmove",f),window.addEventListener("mouseup",p),window.addEventListener("touchend",p),t.querySelector(".delete-img").addEventListener("click",s=>{s.stopPropagation(),t.classList.add("opacity-0","scale-90"),setTimeout(()=>{t.remove(),S=S.filter(E=>E.id!==e.id),B(),L()},200)}),o.appendChild(t)}function ee(e){const o=document.getElementById("notesContainer"),t=document.createElement("div");t.className="absolute pointer-events-auto w-56 min-h-[14rem] p-5 shadow-2xl rounded-xl flex flex-col group animate-pop-in border border-black/5 transition-colors duration-300",t.style.left=`${e.x}px`,t.style.top=`${e.y}px`,t.style.backgroundColor=e.color,t.dataset.id=e.id;const l=[{hex:"#FEF3C7",title:"Yellow"},{hex:"#DCFCE7",title:"Green"},{hex:"#DBEAFE",title:"Blue"},{hex:"#FEE2E2",title:"Red"},{hex:"#F3E8FF",title:"Purple"}].map(n=>`<div class="w-5 h-5 rounded-full border border-black/10 cursor-pointer color-note hover:scale-110 transition-transform shadow-sm" style="background-color: ${n.hex}" data-color="${n.hex}" title="${n.title}"></div>`).join("");t.innerHTML=`
        <div class="note-handle cursor-move w-full mb-3 flex justify-between items-center opacity-0 group-hover:opacity-100 transition-opacity duration-200">
            <div class="flex gap-1.5 bg-white/30 backdrop-blur-sm p-1 rounded-full shadow-sm">
                ${l}
            </div>
            <button class="delete-note w-6 h-6 flex items-center justify-center rounded-full hover:bg-black/10 text-gray-500 hover:text-red-500 transition-colors" title="Delete Note">
                <span class="material-symbols-outlined text-base">close</span>
            </button>
        </div>
        <div class="note-content flex-1 text-base font-medium text-gray-800 dark:text-gray-900 outline-none overflow-hidden break-words leading-relaxed selection:bg-black/10" contenteditable="true" placeholder="Type a note...">
            ${e.text||""}
        </div>
        <div class="absolute bottom-2 right-2 opacity-0 group-hover:opacity-30 pointer-events-none">
            <span class="material-symbols-outlined text-black text-sm">drag_handle</span>
        </div>
    `;const a=t.querySelector(".note-handle");let r=!1,m=[0,0];a.addEventListener("mousedown",n=>{if(n.target.closest(".delete-note")||n.target.closest(".color-note"))return;r=!0;const f=t.getBoundingClientRect();m=[n.clientX-f.left,n.clientY-f.top],t.style.zIndex=100,t.classList.add("scale-[1.02]","shadow-2xl")}),a.addEventListener("touchstart",n=>{if(n.target.closest(".delete-note")||n.target.closest(".color-note"))return;r=!0;const f=t.getBoundingClientRect();m=[n.touches[0].clientX-f.left,n.touches[0].clientY-f.top],t.style.zIndex=100,t.classList.add("scale-[1.02]","shadow-2xl")}),window.addEventListener("mousemove",n=>{if(!r)return;const f=o.getBoundingClientRect();let p=n.clientX-f.left-m[0],s=n.clientY-f.top-m[1];p=Math.max(0,Math.min(p,o.clientWidth-t.offsetWidth)),s=Math.max(0,Math.min(s,o.clientHeight-t.offsetHeight)),t.style.left=`${p}px`,t.style.top=`${s}px`,e.x=p,e.y=s}),window.addEventListener("touchmove",n=>{if(!r)return;const f=o.getBoundingClientRect();let p=n.touches[0].clientX-f.left-m[0],s=n.touches[0].clientY-f.top-m[1];p=Math.max(0,Math.min(p,o.clientWidth-t.offsetWidth)),s=Math.max(0,Math.min(s,o.clientHeight-t.offsetHeight)),t.style.left=`${p}px`,t.style.top=`${s}px`,e.x=p,e.y=s});function x(){r&&(r=!1,t.style.zIndex=20,t.classList.remove("scale-[1.02]","shadow-2xl"),B(),L())}window.addEventListener("mouseup",x),window.addEventListener("touchend",x);const u=t.querySelector(".note-content");u.addEventListener("focus",()=>{});let y=e.text;u.addEventListener("focus",()=>{y=u.innerHTML}),u.addEventListener("input",()=>{e.text=u.innerHTML,clearTimeout(u.timeout),u.timeout=setTimeout(()=>{B(),y!==e.text&&L()},1e3)}),t.querySelector(".delete-note").addEventListener("click",n=>{n.stopPropagation(),t.classList.add("opacity-0","scale-90"),setTimeout(()=>{t.remove(),M=M.filter(f=>f.id!==e.id),B(),L()},200)}),t.querySelectorAll(".color-note").forEach(n=>{n.addEventListener("click",f=>{f.stopPropagation();const p=n.dataset.color;t.style.backgroundColor=p,e.color=p,B(),L()})}),o.appendChild(t)}function ne(){const e=document.getElementById("canvasContainer");html2canvas(e,{backgroundColor:document.documentElement.classList.contains("dark")?"#1C1C1E":"#FFFFFF",scale:2,useCORS:!0,width:e.offsetWidth,height:e.offsetHeight,scrollX:0,scrollY:0}).then(o=>{const t=document.createElement("a");t.download=`whiteboard-${new Date().toISOString().slice(0,10)}.png`,t.href=o.toDataURL("image/png"),t.click()})}function ie(){const{jsPDF:e}=window.jspdf,o=document.getElementById("canvasContainer");html2canvas(o,{backgroundColor:"#FFFFFF",scale:2,useCORS:!0,width:o.offsetWidth,height:o.offsetHeight,scrollX:0,scrollY:0}).then(t=>{const i=t.toDataURL("image/png"),l=new e("l","mm","a4"),a=l.internal.pageSize.getWidth(),r=l.internal.pageSize.getHeight(),m=a/t.width,x=r/t.height,u=Math.min(m,x),y=t.width*u,n=t.height*u;l.addImage(i,"PNG",(a-y)/2,(r-n)/2,y,n),l.save(`whiteboard-${new Date().toISOString().slice(0,10)}.pdf`)})}function Be(){const e=Date.now();let o=null;const t=localStorage.getItem("studentDash_whiteboard");if(t)try{const i=JSON.parse(t);e-i.timestamp<A?o=i:localStorage.removeItem("studentDash_whiteboard")}catch{}if(!o&&R.whiteboard&&R.whiteboard.timestamp&&(e-R.whiteboard.timestamp<A?o=R.whiteboard:(R.whiteboard=null,le())),o){o.dataUrl&&(de(o.dataUrl),document.getElementById("whiteboardPlaceholder").style.opacity="0"),o.notes&&(M=o.notes,M.forEach(l=>ee(l))),o.images&&(S=o.images,S.forEach(l=>Z(l))),R.whiteboard||(R.whiteboard=o);const i=o.timestamp;se(A-(e-i)),setInterval(()=>{const l=A-(Date.now()-i);l<=0?(localStorage.removeItem("studentDash_whiteboard"),window.location.reload()):se(l)},6e4)}}function se(e){const o=document.getElementById("expirationText");if(!o)return;if(e<=0){o.innerText="Expired";return}const t=Math.floor(e/(1e3*60*60)),i=Math.floor(e%(1e3*60*60)/(1e3*60));o.innerText=`${t}h ${i}m Left`}function de(e){const o=new Image;o.onload=()=>{H.drawImage(o,0,0),F.length===0&&L()},o.src=e}function B(e=!1){const o=Date.now();let t=e?null:b.toDataURL(),i=e?[]:M,l=e?[]:S,a=R.whiteboard?.timestamp;if(!a){const m=localStorage.getItem("studentDash_whiteboard");if(m)try{a=JSON.parse(m).timestamp}catch{}}(!a||o-a>A||e)&&(a=o);const r={dataUrl:t,notes:i,images:l,timestamp:a};e?localStorage.removeItem("studentDash_whiteboard"):localStorage.setItem("studentDash_whiteboard",JSON.stringify(r)),R.whiteboard=e?null:r,le()}function Ie(){const e=document.getElementById("hamburgerBtn"),o=document.getElementById("appSidebar"),t=document.getElementById("sidebarOverlay"),i=document.getElementById("closeSidebarBtn");function l(n){!o||!t||(n?(o.classList.remove("-translate-x-full"),t.classList.remove("hidden"),setTimeout(()=>t.classList.remove("opacity-0"),10)):(o.classList.add("-translate-x-full"),t.classList.add("opacity-0"),setTimeout(()=>t.classList.add("hidden"),300)))}e&&e.addEventListener("click",n=>{n.stopPropagation(),l(!0)}),i&&i.addEventListener("click",()=>l(!1)),t&&t.addEventListener("click",()=>l(!1));const a=document.getElementById("profileDropdownBtn"),r=document.getElementById("profileDropdownMenu"),m=document.getElementById("closeDropdownBtn"),x=document.getElementById("dropdownSettingsBtn"),u=document.getElementById("sidebarSettingsBtn"),y=document.getElementById("settingsModal");a&&r&&(a.addEventListener("click",n=>{n.stopPropagation(),r.classList.toggle("hidden")}),document.addEventListener("click",n=>{!a.contains(n.target)&&!r.contains(n.target)&&r.classList.add("hidden")})),m&&r&&m.addEventListener("click",()=>r.classList.add("hidden")),x&&y&&x.addEventListener("click",()=>{r.classList.add("hidden");const n=document.getElementById("setBtnAccount");n&&n.click(),y.classList.remove("hidden"),y.classList.add("flex")}),u&&y&&u.addEventListener("click",()=>{l(!1);const n=document.getElementById("setBtnAccount");n&&n.click(),y.classList.remove("hidden"),y.classList.add("flex")})}function ke(e){const o=document.getElementById("menuUserName"),t=document.getElementById("menuUserEmail"),i=document.getElementById("navProfileImg"),l=document.getElementById("navProfileIcon"),a=document.getElementById("menuProfileImg"),r=document.getElementById("menuProfileIcon");t&&(t.innerText=e.email);const m=R.settings||{};o&&(o.innerText=m.userFirstName?m.userFirstName:e.displayName?e.displayName.split(" ")[0]:"Student");const x=m.userProfileImage;x&&(i&&(i.src=x,i.classList.remove("hidden")),l&&l.classList.add("hidden"),a&&(a.src=x,a.classList.remove("hidden")),r&&r.classList.add("hidden"))}
